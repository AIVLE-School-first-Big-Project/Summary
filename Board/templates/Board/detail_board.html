<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Dashboard - SB Admin</title>
        <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
        <link href="{% static 'css/styles.css' %}" rel="stylesheet" />
        <!-- <link href="assets/css/main.css" rel="stylesheet" /> -->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <style>
          .atagg {
            text-align: right;
          }
          </style>
        <style>
          .btn-rep {
            display:inline-block;
            width:22px;
            height:22px;
            background:url({%static 'images/rep.png'%});
            background-position:-264px -396px;
            text-indent:-9999px;
            overflow:hidden;
            border:none;
          }
        </style>

        <style>
          .my_comment_ul {
              list-style: none;
              padding-left: 0px;
          }
          </style>
        
        
        <script>



          function modify_button() {
            if (confirm("수정하시겠습니까?") == true) {
              var link = "{% url 'Board:update_board' board_detail.b_no %}"
              location.href=link;
            }
            else {
              return;
            }
          }


          function delete_button() {
            if (confirm("정말 삭제하시겠습니까?") == true) {
              var link = "{% url 'Board:board_delete' board_detail.b_no %}"
              
              location.href=link;
          
            }
            else {
              return;
            }
          }
        </script>

    </head>
    <body class="sb-nav-fixed">
      {% include 'header.html' %} 
            <div id="layoutSidenav_content">
              <main>

                  <div class="container-fluid px-4 mt-5" , style="border-radius: 20px; box-shadow: 7px 14px 42px 3px rgba(163, 174, 184, 0.7); width: 1000px">
                    <div class="mt-3"></div>
                    <div class="container">
    
                    <div class="meta" style="color:#747474;">
                      #{{ board_detail.b_no }}
                    </div>

                    <div class="meta" style="color:#282828;">
                      <h3>{{ board_detail.b_title }}</h3>
                    </div>
    
                    <hr>
    
                    <div style="margin:5px; height:45px;">
                      <ul class="context_ul">
                        <li class="context_li" style="margin-top: 7px; margin-left:3px;">
                          <p class="lead" style='font-size:95%;'>{{board_detail.writer}}</p>
                        </li>
                        <li class="context_li" style="margin-left: 10px;">
                          <text class="meta" style="font-size:85%;">{{board_detail.b_date}}</text>
                        </li>
                        <li class="context_li" style="margin-top: 3px; margin-left: 10px;">
                          <img src="{%static 'images/view_icon.png' %}" height="20" width="20">
                        </li>
                        <li class="context_li" style="margin-left: 5px;">
                          <text class="meta" style="font-size:95%;">
                            {{ board_detail.view }}
                          </text>
                        </li>
    
                        {% if user.first_name ==  board_detail.writer %}
                          <li class="context_li" style="margin-left: 20px;">
                            <a onclick="modify_button()" class="cursor_pointer">
                              수정
                            </a>
                          </li>
                          <li class="context_li" style="margin-left: 20px;">
                            <a onclick="delete_button()" class="cursor_pointer">
                              삭제
                            </a>
                          </li>
                        {%endif%}
    
    
                      </ul>
                    </div>
    
                    
                    
    
                    <div class="mt-3"></div>
    
                    <!-- 글 -->
                    <p style="font-size:200%;">{{ board_detail.b_contents|safe }}</p>
    
                  
                      <div class="pt-4">
                        <p>
                          <ul class="my_comment_ul">
                           
                            <li class="context_li" style="margin-top: 0px;">
                              <a class="float-left btn-rep">댓글</a>
                              <text style="margin:5px;">{{board_detail.comment_cnt}}</text>
                            </li>
                           
                          </ul>
                        </p>
                      </div>
                    <div class="mt-5"></div>
                  </div>
                  </div>

                  <div class="comment_container">
                    <div class="pt-5" style="width=100%; margin-left : 170px;">
                     
                        <Button type="button" class="custom-btn btn-6 " onclick="location.href='{% url 'Board:board_list' %}'" style="width:80px;"> <span> 글 목록 </span></Button>
                
                      
                    </div>
                    
      
                  <!-- 댓글 -->
                  <div class="pt-5" style="margin-left:170px;">
            
                      <h3 class="mb-5" style ='font-size=90%;'>댓글 <text style="font-size:90%; color:#353535;">{{comment_cnt}}</text> </h3>
                      <ul class="comment-list">
                       
                  
                        {% for item in comment_list %}
      
                        {% if request.session.update_r_no ==  item.r_no %}
                          <li class="comment">
                         
                            <div class="comment-body">
                            <h3>{{item.writer}}</h3>
                            <form action="{% url 'Board:comment_update' item.r_no%}" class="" method='post'>
                              {% csrf_token %}
                              <div class="form-group">
                                <input type="hidden" id="gameToken" name="b_no" value="{{ board_detail.b_no }}">
                                <textarea name="r_contents" id="message"  cols="30" rows="5" 
                                  class="form-control">{{item.r_contents}}</textarea>
                              </div>
                              <div class="atagg" style="margin-top:10px;">
                                <input type="submit" value="수정" class="custom-btn btn-6 px-4">
                              </div>
                            </form>
                          </div>
                        </li>
                        
                        {% else%}
      
                            <li class="comment">
                              <hr>
                              <div class="comment-body">
                                <h3>{{item.writer}}</h3>
                                <div class="meta">
                                    {{item.r_date}}
                                  </div>
                                <p style="font-size:110%;">{{item.r_contents}}</p>
      
                                {% if user.first_name ==  item.writer %}
                                <div class="atagg">
                                    <a onclick="location.href='{% url 'Board:comment_updateurl' board_detail.b_no item.r_no %}'">  수정 </a>
                                    <a onclick="location.href='{% url 'Board:comment_delete' board_detail.b_no item.r_no %}'"> 삭제 </a><br>
                                </div>    
                                {% endif%}
      
                              </div>
                            </li>
      
                          {% endif%}
      
                        {% endfor %}
      
                      </ul>
                      <!-- END comment-list -->
                      <div class="comment-form-wrap pt-5">
                        
                        {% if user.is_authenticated %}
                        <form action="{% url 'Board:comment' %}" class="" method='post'>
                          {% csrf_token %}
                          <div class="form-group" style='width:1100px'>
                            <hr>
                            <input type="hidden" id="gameToken" name="b_no" value="{{ board_detail.b_no }}">
          
                            <label for="message" style="font-size: 125%" class="mb-3">댓글</label>
                            <textarea name="r_contents" id="message" placeholder="내용을 입력하세요." cols="30" rows="5" 
                              class="form-control"></textarea>
                          </div>
                          <div class="form-group" style='margin-top : 10px;'>
                            <input type="submit" value="등록" class="custom-btn btn-6 px-4">
                          </div>
      
                          </form>
                        {% else %}
                        
                          <div class="form-group">
                            <hr>
          
                            <label for="message" style="font-size: 125%" class="mb-3">댓글</label>
                            <div  cols="50" rows="50" class="form-control">
                              
                                  <a href="{% url 'Mainapp:login' %}">로그인을 해주세요.</a>
                            </div>
                            
                          </div>
                          {% endif %}
                        </div>
                      </div>
                    </div>
                    {% comment %} </div> {% endcomment %}
                  </div>

              </main>
              <!-- <footer class="py-4 bg-light mt-auto">
                  <div class="container-fluid px-4">
                      <div class="d-flex align-items-center justify-content-between small">
                          <div class="text-muted">Copyright &copy; Your Website 2022</div>
                          <div>
                              <a href="#">Privacy Policy</a>
                              &middot;
                              <a href="#">Terms &amp; Conditions</a>
                          </div>
                      </div>
                  </div>
              </footer> -->
          </div>
            
            {% comment %} <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4 mt-5">
                        <div class="profile_container">
                            <div class="profile">
                                <h3 style="font-weight: 600;">내 정보</h3>
                            </div>
                            <img src="{% static 'images/pencil.png' %}">
                            <h5 style="margin-top: 28px;">{{ user.username }}</h5>
                            <h5 style="margin-top: 10px;">{{ user.first_name }}</h5>
                            <!-- <h5>이메일</h5> -->
                            <div class="main-button-black">
                                <a href="{% url 'Mainapp:logout' %}">로그아웃</a>
                            </div>
                        </div>
                    </div>
                </main> {% endcomment %}
                <!-- <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; Your Website 2022</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer> -->
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="{% static 'js/scripts.js' %}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
        <!-- <script src="assets/demo/chart-area-demo.js"></script>
        <script src="assets/demo/chart-bar-demo.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
        <!-- <script src="assets/js/datatables-simple-demo.js"></script> -->
    </body>
</html>
